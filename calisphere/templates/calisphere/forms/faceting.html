{% load calisphere-extras %}

<form id="facet" action="{% url 'calisphere:search' %}" method="get">
  <!-- value of the search query from the header form -->
  <input type="hidden" name="q" value="{{ q }}" form="facet">
  
  <!-- <button type="button" id="deselect-facets" class="btn btn-default btn-block">Deselect All</button> -->

  <div class="facets">
  
    {% for facet_type, facet_type_display in FACET_TYPES %}

    <div class="col-xs-12 col-sm-6 col-md-12">

      <div class="check" id="check__type">

        <div class="check__header js-a-check__header">
          <p class="check__header-text js-a-check__header-text">{{ facet_type_display }} ({{ facets|get_item:facet_type|length }})</p>
          <i class="check__header-arrow-icon js-a-check__header-arrow-icon fa fa-angle-down"></i>
          <div class="check__header-links">
            <a class="js-a-check__link-select-all check__link-select-all--selected" href="#">Select All</a>
            <a class="js-a-check__link-deselect-all check__link-deselect-all--not-selected" href="#">Deselect All</a>
          </div>
        </div>

        <div class="check__popdown js-a-check__popdown">

          <div class="check__button-group">
            <button type="button" disabled class="btn btn-default check__button js-a-check__button-deselect-all">Deselect All</button>
            <button type="button" class="btn btn-default check__button js-a-check__button-select-all">Select All</button>
          </div>

          
          <div class="check__group">
            {% for facet, count in facets|get_item:facet_type %}
            <input id="{{ facet|slugify }}" class="check__input facet facet-{{ facet_type }}" form="facet" type="checkbox" name="{{ facet_type }}" value="{{ facet }}" {% if facet in filters|get_item:facet_type %}checked{% endif %}>
            <label class="check__label" for="{{ facet|slugify }}">{{ facet }} ({{ count }})</label>
            {% endfor %}
          </div>

          <button class="check__update js-a-check__update">Update Results</button>

        </div>

      </div>

      {% if forloop.counter|divisibleby:"2" %}
        </div> <!-- end row -->
        
        <div class="row"> <!-- start new row -->
      {% endif %}
    </div>

    {% endfor %}

  </div> <!-- .facets -->

</form>
