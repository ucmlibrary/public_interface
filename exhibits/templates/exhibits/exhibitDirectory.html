{% extends "calisphere/base.html,calisphere/pjaxTemplates/pjax-base.html"|pjax:request %}
{% load calisphere-extras %}
{% load markdown_filter %}

{% block page-metadata %}
{# {% include "calisphere/microdata.html" with title=item.title.0 description=item.description %} #}
{% endblock %}

{% block content %}
{% include "exhibits/exhibitsHeader.html" with active="a-z" %}

<div class="row">
  <div class="col-md-3">
    <div class="row" style="margin-right: 10px;">
      <div class="button__exhibitDirectory-tabs-container">
        <a class="button__exhibitDirectory-tabs{% if selected == 'all' %}--selected{% endif %}"
          href="{% url 'exhibits:exhibitDirectory' 'all' %}" data-pjax="js-pageContent">
          Browse all exhibitions A-Z
        </a>
        {% for category, display in categories %}
          <a class="button__exhibitDirectory-tabs{% if selected == category %}--selected{% endif %}"
            href="{% url 'exhibits:exhibitDirectory' category %}" data-pjax="js-pageContent">
            Browse {{ display }}
          </a>
        {% endfor %}
        <a class="button__exhibitDirectory-tabs{% if selected == 'uncategorized' %}--selected{% endif %}"
          href="{% url 'exhibits:exhibitDirectory' 'uncategorized' %}" data-pjax="js-pageContent">
          Browse uncategorized
        </a>
        <h3>Search for exhibitions:</h3>
        <form class="exhibit__title-search" role="search" id="js-exhibitTitleSearch" action="{% url 'exhibits:exhibitDirectory' 'search' %}" method="get">
          <label for="exhibit__search-field" class="exhibit__search-label" style="display: none;">Search exhibitions</label>
          <div class="input-group">
            <input id="exhibit__search-field" form="js-exhibitTitleSearch" name="title" value="{{ title }}" type="search" placeholder="Start typing exhibition name" class="form-control">
            <span class="input-group-btn">
              <button class="btn btn-default global-search__button" type="submit"><span class="fa fa-search"></span>
              </button>
            </span>
          </div>
        </form>        
      </div>
    </div>
  </div>

  <div class="col-md-9 exhibitDirectory">
    {% for theme, exhibits in themes %}
      {% if theme != '' %}
        <h2>{{ exhibits|length }} exhibition{{ exhibits|pluralize }} in <a href="{{ theme.get_absolute_url }}">{{ theme.title }}</a>:</h2>
      {% endif %}
      <div class="row exhibitDirectory__exhibits">
        {% for exhibit in exhibits %}
          <div class="col-md-3 col-sm-4 col-xs-6">
            <a href="{{ exhibit.get_absolute_url }}" data-pjax="js-pageContent">
              <div class="exhibit__lockup--med">
                <div class="exhibit__lockup--med-image">
                  <div class="aspect-ratio-content exhibit__lockup--med-image-content" style="background-image: url('{{ exhibit.exhibit_lockup }}');">
                  </div>
                </div>
                <div class="exhibit__lockup--med-title">
                  <div class="aspect-ratio-content exhibit__lockup--med-title-content">{{ exhibit }}</div>
                </div>
              </div>
            </a>
          </div>
        {% endfor %}
        {% if theme != '' %}
          <div class="col-md-6 col-sm-8 col-xs-12">
            <a href="{{ theme.get_absolute_url }}" data-pjax="js-pageContent">
              <div class="theme__lockup--horizontal">
                <div class="theme__lockup--horizontal-image">
                  <div class="aspect-ratio-content theme__lockup--horizontal-image-content" style="background-image: url('{{ theme.theme_lockup }}');">
                    <div class="theme__lockup--horizontal-title">
                      {{ theme.title }}
                      <div class="theme__lockup--horizontal-exhibit-count">{{ theme.exhibittheme_set.all|length }} exhibitions</div>
                    </div>
                  </div>
                </div>
              </div>
            </a>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}